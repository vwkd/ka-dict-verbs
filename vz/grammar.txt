// grammar in McKeeman Form extended with
// comments, repetitions, optional, arguments, repetition index

Text
    Line NewlineLine*

NewlineLine
    nl Line

Line
    Source ws TargetOrReference

Source
    WordKaMeaning
    WordKa

WordKaMeaning
    WordKa SuperscriptNumber

WordKa
    WordKaHyphen
    CharsKa

// note: allow only single hyphen in word
WordKaHyphen
    CharsKa "-" CharsKa

CharsKa
    CharKa+

CharKa
    UNICODE_GEORGIAN_CHARACTER

// todo: maybe more?
SuperscriptNumber
    "¹"
    "²"
    "³"
    "⁴"
    "⁵"
    "⁶"
    "⁷"
    "⁸"
    "⁹"

TargetOrReference
    Reference
    Target

Reference
    ReferenceValue
    ReferenceValueTagged

ReferenceValueTagged
    Tags ws ReferenceValue

ReferenceValue
    ReferenceType ws Source

ReferenceType
    "s." ws "Bed."
    "s." 
    "id."

Tags
    "{" Categories "}"

Categories
    Category CommaWhitespaceCategory*

CommaWhitespaceCategory
    "," ws Category

Category
    "biol."
    "bot."
    "chem."
    "chew."
    "desp."
    "elektr."
    "ethn."
    "fig."
    "gr."
    "gur."
    "hist."
    "HV."
    "imer."
    "ing."
    "iro."
    "jur."
    "kach."
    "khar."
    "khis."
    "landw."
    "letsch."
    "math."
    "med."
    "mil."
    "moch."
    "moral."
    "mthiul."
    "mus."
    "neg."
    "nz."
    "o-imer."
    "photogr."
    "phys."
    "poet."
    "pol."
    "psch."
    "ratsch."
    "rl."
    "spo."
    "tech."
    "thusch."
    "typ."
    "u-imer."
    "u-ratsch."
    "umg."
    "unk."
    "va."
    "vulg."

Target
    DefinitionList
    Definition

DefinitionList
    DefinitionListItem(1) WhitespaceDefinitionListItem_i=2(i + 1)+

WhitespaceDefinitionListItem(i)
    ws DefinitionListItem(i)

DefinitionListItem(i)
    i "." ws Definition

Definition
    Entries
    EntriesTagged

EntriesTagged
    Tags ws Entries

// todo: assumes entries if and only if separated by comma, not yet true ❗️
Entries
    Entry CommaWhitespaceEntry*

CommaWhitespaceEntry
    "," ws Entry

// todo: not true, might have other WordsKa ❗️
Entry
    WordsDe

// todo: assume expanded all shorthands, has no (), od., /, ;, not yet true ❗️
WordsDe
    WordDe WhitespaceWordDe*

WhitespaceWordDe
    ws WordDe

WordDe
    WordDeBig
    WordDeSmall
    WordDeHyphen

// todo: allow WordDeSmall?
WordDeHyphen
    WordDeBig "-" WordDeBig

// note: require at least two letters
WordDeBig
    CharDeBig CharDeSmall+

// note: require at least two letters
WordDeSmall
    CharDeSmall{2,}

CharDeBig
    UNICODE_GERMAN_BIG_CHARACTER

CharDeSmall
    UNICODE_GERMAN_SMALL_CHARACTER

nl
    UNICODE_NEWLINE_CHARACTER

ws
    UNICODE_WHITESPACE_CHARACTER